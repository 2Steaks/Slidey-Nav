!function(a,b,c,d){"use strict";function e(b,c){this.element=a(b),this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.is_dragging=!1,this.was_dragged=!1,this.current_position=0,this.cursor_position=0,this.list=this.element.children("ul"),this.items=this.list.children("li"),this.item_count=this.items.length,this.init()}var f="graphiteNav",g={active_class:"active",is_centering:!0};a.extend(e.prototype,{init:function(){var a=this;this.bindUIActions(),setTimeout(function(){a.activeItem()},200)},bindUIActions:function(){var c=this.debounce(this.activeItem,200);a(b).on("resize",a.proxy(c,this)),this.element.on("mousedown touchstart",a.proxy(this.onDragStart,this)),this.element.on("mousemove touchmove",a.proxy(this.onDrag,this)),this.element.on("mouseup mouseleave touchend",a.proxy(this.onDragEnd,this))},unBindUIActions:function(){a(b).off("resize"),this.element.off("mousedown mouseup mouseleave mousemove touchstart touchend touchmove")},activeItem:function(){if(this.was_dragged)return!1;var a=this.items.filter("."+this.settings.active_class);return 0===a.length?(("undefined"!=typeof console||"undefined"!=typeof console.warn)&&console.warn("Graphite Nav: Cannot find active list element, please check your class name matches."),this.centerNavFallback(),!1):void this.centerNav(a)},centerNav:function(a){var b=a.outerWidth()/2,c=a.position().left+b-this.element.outerWidth()/2,d=this.setLimits(c);TweenMax.to(this.list,0,{x:-d,onComplete:this.setGuides,onCompleteScope:this})},centerNavFallback:function(){var a=this.element.width()/2,b=this.list.outerWidth()/2,c=b-a;TweenMax.to(this.list,0,{x:-c,onComplete:this.setGuides,onCompleteScope:this})},onDragStart:function(a){this.is_dragging=!0,this.was_dragged=!0,this.current_position=parseInt(this.getMenuPosition()),this.cursor_position=this.getDevicePositionX("mousedown"===a.type,a)},onDragEnd:function(a){this.dominantItem(a),this.is_dragging=!1},onDrag:function(a){return this.is_dragging===!1?!1:void this.drag(a)},drag:function(a){var b=this.getDevicePositionX("mousemove"===a.type,a),c=Math.abs(this.current_position)+this.cursor_position-b,d=this.setLimits(c);TweenMax.to(this.list,0,{x:-d})},setLimits:function(a){var b=this.element.outerWidth(),c=this.list.outerWidth(),d=c-b;return this.settings.is_centering=!0,0>a?(a=0,this.settings.is_centering=!1):a>d&&(a=d,this.settings.is_centering=!1),a},dominantItem:function(b){if(!this.settings.is_centering)return this.setGuides(),!1;var c,d=this.getMenuPosition()-this.element.outerWidth()/2,e=this.item_count-1,f=1;this.items.each(function(b,g){var h=a(g),i=h.position().left+h.outerWidth();return Math.abs(d)<=i?(c=h,!1):(b===e&&(c=h),void f++)}),0!==f&&f!==this.item_count&&this.autoCentering(c,f)},autoCentering:function(a,b){var c=this.element.outerWidth(),d=c/2,e=a.outerWidth()/2,f=-a.position().left+d-e,g=this.list.outerWidth(),h=a.position().left+a.outerWidth(),i=g-h,j=g-c;f>0?f=0:c>i+j&&(f=-j),TweenMax.to(this.list,.5,{x:f,ease:Power4.easeOut,onComplete:this.setGuides,onCompleteScope:this})},setGuides:function(){var b=this.element.width(),c=Math.abs(this.getMenuPosition()),d={left:20,right:40},e={left:{active:!1,element:!1},right:{active:!1,element:!1}};this.items.each(function(f,g){var h=a(g),i=h.position().left+d.left,j=i+h.outerWidth()-c-d.right;c>i?(e.left.element=f,e.left.active=!0):j>b&&(e.right.element=f,e.right.active=!0)}),e.left.active?this.element.addClass("has--prev"):this.element.removeClass("has--prev"),e.right.active?this.element.addClass("has--next"):this.element.removeClass("has--next")},getMenuPosition:function(){return parseInt(this.list.css("transform").split(",")[4])},getDevicePositionX:function(a,b){return a?b.pageX:b.originalEvent.touches[0].pageX},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}}),a.fn.graphiteNav=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);